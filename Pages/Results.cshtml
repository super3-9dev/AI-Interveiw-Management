t@page
@model InterviewBot.Pages.ResultsModel
@using Microsoft.AspNetCore.Mvc.Localization
@using InterviewBot.Models
@inject IViewLocalizer Localizer
@{
    ViewData["Title"] = "Results";
}

@section Styles {
    <link rel="stylesheet" href="~/css/results.css" />
}

<div class="results-container">
    <div class="page-header">
        <h1 class="page-title">Your Results</h1>
        <p class="page-subtitle">Review your interview sessions and resume analyses</p>
    </div>

    @if (Model.ResumeAnalyses.Any() || Model.InterviewSessions.Any())
    {
        <div class="results-grid">
            <!-- Resume Analysis Results -->
            <div class="results-section">
                <div class="section-header">
                    <div class="section-icon">ðŸ“Š</div>
                    <h2 class="section-title">Resume Analyses</h2>
                </div>
                
                @if (Model.ResumeAnalyses.Any())
                {
                    <ul class="results-list">
                        @foreach (var analysis in Model.ResumeAnalyses)
                        {
                            <li class="result-item">
                                <div class="result-title">@analysis.FileName</div>
                                <div class="result-meta">
                                    <span>@analysis.CreatedAt.ToString("MMM dd, yyyy")</span>
                                    <span class="result-status @(analysis.Status == "Completed" ? "status-completed" : analysis.Status == "Processing" ? "status-in-progress" : "status-failed")">
                                        @analysis.Status
                                    </span>
                                </div>
                                <div class="result-description">
                                    @if (analysis.Status == "Completed")
                                    {
                                        <span>Analysis completed successfully</span>
                                    }
                                    else if (analysis.Status == "Processing")
                                    {
                                        <span>Analysis in progress... @analysis.Progress% complete</span>
                                    }
                                    else
                                    {
                                        <span>Analysis failed. Please try again.</span>
                                    }
                                </div>
                                <div class="result-actions">
                                    @if (analysis.Status == "Completed")
                                    {
                                        <a href="/ResumeAnalysisResults?id=@analysis.Id" class="btn btn-primary">View Results</a>
                                    }
                                    else if (analysis.Status == "Failed")
                                    {
                                        <a href="/ResumeAnalysisResults?id=@analysis.Id" class="btn btn-secondary">Retry</a>
                                    }
                                </div>
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <div class="empty-state">
                        <div class="empty-icon">ðŸ“„</div>
                        <div class="empty-title">No Resume Analyses Yet</div>
                        <div class="empty-description">Start by uploading your resume for AI analysis</div>
                        <a href="/NewAnalysis" class="create-first-btn">Start New Analysis</a>
                    </div>
                }
            </div>

            <!-- Interview Results -->
            <div class="results-section">
                <div class="section-header">
                    <div class="section-icon">ðŸŽ¯</div>
                    <h2 class="section-title">Interview Sessions</h2>
                </div>
                
                @if (Model.InterviewSessions.Any())
                {
                    <ul class="results-list">
                        @foreach (var session in Model.InterviewSessions)
                        {
                            <li class="result-item">
                                <div class="result-title">
                                    @(session.InterviewCatalog?.Title ?? session.CustomInterview?.Title ?? "Interview Session")
                                </div>
                                <div class="result-meta">
                                    <span>@session.StartTime.ToString("MMM dd, yyyy")</span>
                                    <span class="result-status @(session.Status == InterviewStatus.Completed ? "status-completed" : session.Status == InterviewStatus.InProgress ? "status-in-progress" : "status-failed")">
                                        @session.Status
                                    </span>
                                </div>
                                <div class="result-description">
                                    @if (session.Status == InterviewStatus.Completed)
                                    {
                                        <span>Interview completed. Score: @(session.Score?.ToString() ?? "N/A")/100</span>
                                    }
                                    else if (session.Status == InterviewStatus.InProgress)
                                    {
                                        <span>Interview in progress. Question @session.CurrentQuestionNumber</span>
                                    }
                                    else
                                    {
                                        <span>Interview @session.Status.ToString().ToLower()</span>
                                    }
                                </div>
                                <div class="result-actions">
                                    @if (session.Status == InterviewStatus.Completed)
                                    {
                                        <a href="/InterviewResults?id=@session.Id" class="btn btn-primary">View Results</a>
                                    }
                                    else if (session.Status == InterviewStatus.InProgress)
                                    {
                                        <a href="/InterviewSession?id=@session.Id" class="btn btn-secondary">Continue</a>
                                    }
                                </div>
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <div class="empty-state">
                        <div class="empty-icon">ðŸŽ¤</div>
                        <div class="empty-title">No Interview Sessions Yet</div>
                        <div class="empty-description">Start your first interview to see results here</div>
                        <a href="/CustomInterview" class="create-first-btn">Start Interview</a>
                    </div>
                }
            </div>
        </div>
    }
    else
    {
        <!-- Complete Empty State -->
        <div class="empty-state">
            <div class="empty-icon">ðŸ“‹</div>
            <div class="empty-title">No Results Yet</div>
            <div class="empty-description">Get started by analyzing your resume or taking an interview</div>
            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                <a href="/NewAnalysis" class="create-first-btn">Analyze Resume</a>
                <a href="/CustomInterview" class="create-first-btn">Start Interview</a>
            </div>
        </div>
    }
</div>

